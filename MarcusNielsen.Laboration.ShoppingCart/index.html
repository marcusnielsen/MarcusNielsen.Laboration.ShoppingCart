<!DOCTYPE html>

<!--ng-app marks where angular kicks in-->
<!--ng-controller sets the datasource for databinding-->
<html xmlns="http://www.w3.org/1999/xhtml" data-ng-app="shoppingCart" data-ng-controller="appCtrl">
<head>
    <!--databinding of title-->
    <title>{{app.title}}</title>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="http://cdnjs.cloudflare.com/ajax/libs/animate.css/3.0.0/animate.min.css" rel="stylesheet" />
    <link href="Content/style.css" rel="stylesheet" />
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <div class="container text-center">
                <div class="top-margin clearfix">
                    <span class="pull-right">
                        <span>You have </span>
                        <span data-ng-show="shoppingCart.getUnitsSum() === 0">no items </span>
                        <span data-ng-show="shoppingCart.getUnitsSum() === 1">{{shoppingCart.getUnitsSum()}} item </span>
                        <span data-ng-show="shoppingCart.getUnitsSum() > 1">{{shoppingCart.getUnitsSum()}} items </span>
                        <span>in your cart </span>
                        <span class="btn btn-primary"><span class="glyphicon glyphicon-shopping-cart"></span></span>
                    </span>
                    <span class="pull-left"><h4>{{app.title}}</h4></span>
                </div>
            </div>
        </div>

        <div class="container top-margin">
            <div class="jumbotron clearfix">
                <h1 class="text-center">{{products.getFocusedProduct().title}}</h1>
                <img class="img-responsive img-rounded img-focused" src="{{products.getFocusedProduct().image}}" alt="products.getFocusedProduct().title" />
                <p class="top-margin text-center">
                    {{products.getFocusedProduct().price}} {{products.getFocusedProduct().currency}}
                    <span class="btn btn-primary" data-ng-click="shoppingCart.addToCart(products.getFocusedProduct().title)">
                        <span class="glyphicon glyphicon-plus-sign"></span>
                    </span>
                </p>
            </div>

            <div class="list-group">
                <div class="list-group-item clearfix" data-ng-repeat="product in products.getProducts()">
                    <img class="img-listed img-rounded pull-left" src="{{product.image}}" alt="{{product.title}}" />
                    <span class="pull-right">
                        <span class="inline-block">
                            <span>Available </span>
                            <strong>{{product.available}}</strong><br />
                            <span>In cart </span>
                            <strong data-ng-hide="shoppingCart.hasCartItemByTitle(product.title)">0</strong>
                            <strong data-ng-show="shoppingCart.hasCartItemByTitle(product.title)">{{shoppingCart.getCartItemByTitle(product.title).units}}</strong>
                        </span>
                        <span class="btn btn-primary" data-ng-click="shoppingCart.addToCart(product.title)">
                            <span class="glyphicon glyphicon-plus-sign"></span>
                        </span>
                    </span>
                    <h4 class="list-group-item-heading">{{product.title}}
                    </h4>
                    <p class="list-group-item-text">
                        <strong>{{products.getFocusedProduct().price}}</strong> {{products.getFocusedProduct().currency}}
                    </p>
                </div>
            </div>

        </div>

        <!--footer compability element-->
        <div class="push"></div>
    </div>

    <div class="footer">
        <div class="container text-center">
            <h4>
                <a href="mailto:marcus.nielsen@r2m.se?subject=Vi väljer dig!">{{app.footerText}}</a>
            </h4>
        </div>
    </div>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.0/lodash.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.3/angular.min.js"></script>
    <script src="app/appModule.js"></script>
    <script src="app/appCtrl.js"></script>
    <script src="app/shoppingCart/shoppingCartFactory.js"></script>
    <script src="app/shoppingCart/productsFactory.js"></script>
    <script src="app/shoppingCart/jsonProductFeedResultMockFactory.js"></script>
</body>
</html>
